apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: '-80'
  labels:
    name: airlock-microgateway
  name: airlock-microgateway
  namespace: syn-airlock-microgateway
spec:
  channel: stable
  config:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: node-role.kubernetes.io/infra
                  operator: Exists
    env:
      - name: GATEWAY_API_POD_MONITOR_CREATE
        value: 'true'
      - name: GATEWAY_API_BACKEND_TLS_POLICY_API_GROUP
        value: x-openshift.microgateway.airlock.com
  installPlanApproval: Manual
  name: airlock-microgateway
  source: certified-operators
  sourceNamespace: openshift-operators-redhat
