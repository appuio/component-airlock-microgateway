parameters:
  airlock_microgateway:
    =_metadata:
      multi_tenant: true
    namespace: syn-airlock-microgateway

    # Possible values: "helm", "olm"
    install_method: helm

    license: ""

    network_policy:
      namespace_selector:
        matchLabels:
          'appuio.ch/waf': 'airlock'

    gateway_listener_manager:
      enabled: false
      create_listener_annotation: airlock-microgateway.appuio.io/create-gateway-https-listener
      tls_secret_name_annotation: airlock-microgateway.appuio.io/tls-secret-name

    httproute_certificate_manager:
      enabled: false
      create_certificate_annotation: airlock-microgateway.appuio.io/create-certificate
      tls_secret_name_annotation: ${airlock_microgateway:gateway_listener_manager:tls_secret_name_annotation}
      gateway_default_cluster_issuer_annotation: airlock-microgateway.appuio.io/httproute-default-cluster-issuer
      cluster_issuer_annotation: airlock-microgateway.appuio.io/cluster-issuer
      issuer_annotation: airlock-microgateway.appuio.io/issuer

    gateway_api:
      # Installs upstream Kubernetes Gateway API if true
      enabled: true
      # Kubernetes Gateway API version
      version: "v1.2.1"
      # Upstream Kubernetes Gateway API source
      source: https://github.com/kubernetes-sigs/gateway-api/releases/download/${airlock_microgateway:gateway_api:version}/standard-install.yaml

    airlock_xopenshift:
      enabled: false
      version: "v1.3.0"
      channel: experimental
      crds:
        backendtlspolicies: BACKEND_TLS_POLICY

    gateway_classes: {}
    gateway_parameters: {}
    gateways: {}

    alerts:
      ignoreNames: []
      patches: {}

    # See Airlock docs: https://docs.airlock.com/microgateway/4.5/index/1726159368039.html
    helm_values:
      operator:
        gatewayAPI:
          enabled: true
          podMonitor:
            create: true
            labels:
              release: "kube-prometheus-stack"
        serviceMonitor:
          create: true
          labels:
            release: "kube-prometheus-stack"
      dashboards:
        create: true

    olm:
      version: "stable"
      channel: "${airlock_microgateway:olm:version}"
      upgrade_strategy:
        manual_upgrade: false
        upgrade_job_hook: true
        upgrade_job_selector: {}
      config:
        create_pod_monitor: true

    charts:
      microgateway:
        version: "4.7.3"
        source: "oci://quay.io/airlockcharts/microgateway"

    images:
      oc:
        registry: quay.io
        image: appuio/oc
        tag: v4.19
